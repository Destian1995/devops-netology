# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Ответ(по порядку вопросов):

- Чеки в json файликах я бы хранил в докуменоориентируованной СУБД, например MongoDB, здесь как объект хранения выступает документ конкретного
шаблона в конкретном формате json. Идентификатор здесь выступает в качестве ключа.
- Здесь можно использовать графовый тип СУБД так как здесь адреса и названия складов предствляют узлы, а дороги представляются в виде ребра графовой структуры.
- Здесь подойдет сетевая СУБД, потому что у потомка может быть несколько родителей.
- Здесь подошла бы СУБД ключ-значение, ключ - идентификатор, значение - имя клиента.
- Здесь бы подошла реляционная СУБД у магазина обычно много клиентов и как следствие еще больше заказов, товаров и прочее
каждая из этих сущностей имеет свой свойства. Здесь обязательно надо фиксировать покупки их время и так же проводить срез по проданным товарам.




## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

* Данные записываются на все узлы с задержкой до часа (асинхронная запись)
* При сетевых сбоях, система может разделиться на 2 раздельных кластера
* Система может не прислать корректный ответ или сбросить соединение
А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Ответы

- согласно CAP-теореме:
 * CP согласованность и устойчивость к разделению в ущерб доступности.
 * AP доступность и устойчивость к разделению в ущерб согласованности
 * CP согласованность и устойчивость.

- согласно PACELC-теореме:
 * PC/EC
 * PA/EL
 * PC/EC
 
## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## Ответы

Нет никак, они являются противоположностью друг друга. BASE ориентирован на производительность системы (доступность), 
ACID на сохранность данных(стойкость к разделению и сохранность данных). Даже в треугольнике CAP они будут находится на разных ребрах.
А как мы знаем только 2 из 3 свойств CAP мы можем выбрать.


## Задача 4 

Вам дали задачу написать системное решение, основой которого бы послужили:

* фиксация некоторых значений с временем жизни
* реакция на истечение таймаута
-
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

## Ответ

Redis - СУБД типа key-value.
Она может использоваться для реализации кэшей, брокеров сообщений с дополнительной долговечностью(механизм pub/sub).
Ориентированна на производительность, которая достигается большими требованиями к оперативной памяти.
По умолчанию Redis записывает данные в файловую систему не реже одного раза в 2 секунды, при необходимости доступны более или менее надежные параметры. 
В случае полного сбоя системы в настройках по умолчанию будет потеряно всего несколько секунд данных.
Все данные храняться в оперативной памяти и при отказе сервера все данные с последней синхронизации с диском будут утеряны.
Минус системы репликации Redis в том, что сама по себе она не поддерживает автоматическую отказоустойчивость: если ведущий узел выходит из строя, необходимо вручную выбрать нового ведущего среди ведомых узлов. 
Но имеется система Redis Sentinel, обеспечивающая мониторинг и автоматическое переключение.
К минусам я бы так же отнес требовательность к оперативной памяти.




