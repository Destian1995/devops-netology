# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Задача 1

## Ответ:
- ссылка на репозиторий:
https://hub.docker.com/r/destian1995/devops-netology


## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

Сценарий:
## Ответы
- Высоконагруженное монолитное java веб-приложение;
При активном развитии приложения лучше использовать контейнеры, они быстрее разворачиваются менее требовательны к месту
и вообще к ресурсам. Если приложение будет просто "висеть" то смысла в контейнерах нет, можно использовать физ. сервер.
- Nodejs веб-приложение;
Здесь лучше всего использовать Docker, опять так быстро сможем развернуть приложение со всем необходимым.
- Мобильное приложение c версиями для Android и iOS;
Вообщем и целом Docker здесь подойдет. 
Главным достоинством сборки Android-приложений в Docker контейнере является то, 
что при необходимости сборки приложения на другом устройстве нет необходимости в установке всего ПО, 
достаточно скачать необходимый образ.
- Шина данных на базе Apache Kafka;
Вполне подойдет Docker, он часто используется вместе с брокерами очередей. 
В этом плане Docker так же поможет быстро откатится на прошлую версию.
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
Docker будет удобнее для кластериации, у контейнеров меньше затрат на ресурсы.
- Мониторинг-стек на базе Prometheus и Grafana;
Докер подойдёт хорошо. Разворвачивать node_exporter с Docker скорей всего не стоит, 
т.к. ему требуется прямой доступ к метрикам ядра, но Prometheus и Grafana можно использовать в Докере.
- MongoDB, как основное хранилище данных для java-приложения;
У MongoDB есть официальный образ на DockerHub. Docker подойдет
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.
Так как серверу в отличии от приложения не требуется масштабирование, то здесь подойдет виртуальная машина.
В ней достаточно удобно будет делать бэкапы плюс ее можно мигрировать в кластере.
С другой стороны и Docker тоже подойдет, если при этом везде используется контейниризация, ну тут уже концепция компании влияет.




## Задача 3

Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
Запустите второй контейнер из образа debian в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data;
Добавьте еще один файл в папку /data на хостовой машине;
Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.

## Ответы

Запуск контейнеров:

Загрузил контейнеры
docker run -it --rm -d --name centos -v $(pwd)/data:/data centos:latest
docker run -it --rm -d --name debian -v $(pwd)/data:/data debian:stable

vagrant@vagrant:~$ sudo docker images
REPOSITORY         TAG       IMAGE ID       CREATED         SIZE
debian             stable    f70ab914d71a   4 days ago      124MB
centos             latest    5d0da3dc9764   11 months ago   231MB

1 - Файл Centos

vagrant@vagrant:~$ sudo docker exec -it centos bash
[root@00938d243e01 /]# echo "Hello Netology from CentOS!" > /data/centos.txt
[root@00938d243e01 /]# exit
exit

2 - Файл с хоста
root@vagrant:/home/vagrant# echo "Hellow Netology from Host!" > data/host.txt


3 - Файлы в директории /data в контейнере с Debian
vagrant@vagrant:~$ sudo docker exec -it debian bash
root@b9e943ea973a:/# ls -l /data/
total 8
-rw-r--r-- 1 root root 28 Aug 27 14:32 centos.txt
-rw-r--r-- 1 root root 27 Aug 27 14:35 host.txt

## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

## Ответ

Ссылка: 











